---
layout: post
title: "C++ Boost"
description: C++ Boost
modified: 2022-01-12
category: C++
tags: [C++]
---

# 一、安装

    # 制作新镜像
    docker build -f Dockerfile -t mydev/ubuntu:2.0.0 .
    
    # 创建容器
    docker run -d --cap-add sys_ptrace -p 127.0.0.1:45678:22 -p 127.0.0.1:8730:873 --name mycpp3 mydev/ubuntu:2.0.0

Dockerfile：

    FROM hub.c.163.com/library/ubuntu:16.04
    
    RUN apt-get update
    
    RUN apt-get install -y build-essential
    RUN apt-get install -y gdb
    
    RUN apt-get install -y openssh-server
    RUN mkdir /var/run/sshd
    RUN sed -ri 's/^PermitRootLogin\s+.*/PermitRootLogin yes/' /etc/ssh/sshd_config
    RUN sed -ri 's/UsePAM yes/#UsePAM yes/g' /etc/ssh/sshd_config
    
    RUN apt-get install -y rsync
    RUN sed -ri 's/RSYNC_ENABLE=false/RSYNC_ENABLE=true/g' /etc/default/rsync
    COPY rsync.conf /etc
    
    RUN echo 'root:000000' |chpasswd
    
    RUN mkdir /root/sync
    
    COPY entrypoint.sh /sbin
    RUN chmod +x /sbin/entrypoint.sh
    ENTRYPOINT [ "/sbin/entrypoint.sh" ]
    
    RUN wget "https://cmake.org/files/v3.20/cmake-3.20.5-linux-x86_64.tar.gz" \
    && tar zxvf cmake-3.20.5-linux-x86_64.tar.gz \
    && mv cmake-3.20.5-linux-x86_64 /opt/cmake-3.20.5 \
    && ln -sf /opt/cmake-3.20.5/bin/*  /usr/bin/
    
    # Boost安装 
    RUN wget "https://boostorg.jfrog.io/artifactory/main/release/1.78.0/source/boost_1_78_0.tar.gz" \
    && tar zxvf boost_1_78_0.tar.gz \
    && mv boost_1_78_0 /usr/local/boost_1_78_0 \
    && cd /usr/local/boost_1_78_0 \
    && sh ./bootstrap.sh \
    && ./b2 install

配置环境变量：

    echo "export BOOST_ROOT=/usr/local/boost_1_78_0" >> /etc/bash.bashrc
    echo "export BOOST_INCLUDE=/usr/local/include/boost" >> /etc/bash.bashrc
    echo "export BOOST_LIB=/usr/local/lib" >> /etc/bash.bashrc

# 二、使用

CMakeLists：

    cmake_minimum_required(VERSION 3.20)
    project(demo2)
    set(CMAKE_CXX_STANDARD 14)
    set(CMAKE_BUILD_TYPE Debug)
    
    find_package(Boost REQUIRED COMPONENTS locale)
    
    if(NOT Boost_FOUND)
    message("NOT found Boost")
    endif()
    
    #设置头文件路径
    set(INC_DIR ./include)
    #设置链接库路径
    set(LINK_DIR ./lib)
    #引入头文件
    include_directories(${INC_DIR})
    #引入库文件
    link_directories(${LINK_DIR})
    
    # Linux
    add_library(thostmduserapi_se SHARED IMPORTED)
    add_library(thosttraderapi_se SHARED IMPORTED)
    SET_PROPERTY(TARGET thostmduserapi_se PROPERTY IMPORTED_LOCATION ${PROJECT_SOURCE_DIR}/lib/thostmduserapi_se.so)
    SET_PROPERTY(TARGET thosttraderapi_se PROPERTY IMPORTED_LOCATION ${PROJECT_SOURCE_DIR}/lib/thosttraderapi_se.so)
    
    include_directories(${Boost_INCLUDE_DIRS})
    
    FILE(GLOB_RECURSE CURRENT_SOURCES src/*.cpp)
    
    add_executable(demo2 main.cpp ${CURRENT_SOURCES})
    
    # windows将第三方库连接在一起
    #target_link_libraries(demo2 thostmduserapi_se.lib thosttraderapi_se.lib)
    # Linux
    target_link_libraries(demo2 thostmduserapi_se thosttraderapi_se ${Boost_LIBRARIES})

调用：

    // 头部
    #include <boost/locale.hpp>
    // 代码中调用
    std::cout << "ErrorMsg=" << boost::locale::conv::to_utf<char>(pRspInfo->ErrorMsg, "GB2312") << std::endl;

# 三、参考

1.[linux下boost库的安装](https://www.cnblogs.com/LyndonYoung/articles/5288618.html)

2.[CMakeLists.txt添加Boost库](https://blog.csdn.net/u011608180/article/details/103770401)

3.[Boost官网](https://www.boost.org/)

4.[Boost中文文档](http://zh.highscore.de/cpp/boost/)